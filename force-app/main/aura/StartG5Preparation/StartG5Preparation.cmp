<aura:component implements="lightning:isUrlAddressable,force:lightningQuickActionWithoutHeader,flexipage:availableForRecordHome,force:hasRecordId" access="global" > 
    <aura:handler name="init" value="{!this}" action="{!c.init}" />
    <aura:attribute name="reqCom" type="Boolean" default="False" />
    <aura:html tag="style">
        .cuf-content {
        padding: 0 0rem !important;
        }
        .slds-p-around--medium {
        padding: 0px !important;
        }       
        .slds-modal__content{
        overflow-y:hidden !important;
        height:unset !important;
        max-height:unset !important;
        }
        .editForm {
        padding: 10px !important;
        }
        .slds-has-error {
        color: var(--lwc-colorTextError,rgb(194, 57, 52));
        font-size: var(--lwc-fontSize2,0.75rem);
        margin-top: var(--lwc-spacingXxxSmall,0.125rem);
        display: block;
        padding-left: 5px;
        }
    </aura:html>
    <div class="modal-header slds-modal__header slds-size_1-of-1">
        <h4 class="title slds-text-heading--medium" >Start G5 Preparation</h4>
    </div>
    
    <!-- MODAL BODY / INPUT FORM -->    
    <div class="slds-modal__content slds-p-around--medium slds-size_1-of-1 slds-is-relative" aura:id="modalbody" id="modalbody">
        <lightning:notificationsLibrary aura:id="notifLib" />
        <lightning:recordEditForm recordId="{!v.recordId}" objectApiName="Opportunity"  aura:id="recordForm"  
                                  onerror="{!c.handleOnError}" 
                                  onsuccess="{!c.handleSuccess}"  
                                  onsubmit="{!c.handleFormSubmit}" 
            						onload="{!c.handleLoad}" >
            <lightning:spinner aura:id="spinner" variant="brand" class="slds-hide"/>
            <div class="editForm">
                <lightning:messages />
                <lightning:inputField fieldName="StageName" class="slds-hide" />
                <lightning:inputField fieldName="Phase_Status__c" class="slds-hide"/>
                <lightning:inputField fieldName="G5_Trigger__c" onchange="{! c.handleChangeTrigger }" aura:id="g5trigger" />
                        <span class="slds-has-error slds-hide" aura:id="error">Please choose an option.</span>
                <lightning:inputField fieldName="Comments_for_G5_preparation__c"  required="{!v.reqCom}"  />
            </div>
            <div class="modal-footer slds-modal__footer slds-size_1-of-1">
                <div class="forceChangeRecordTypeFooter">
                    <lightning:button class="slds-m-top_small" variant="brand-outline" onclick="{! c.handleCancel }"  name="cancel" label="Cancel and Back to Opportunity" aura:id="cancelButton" />
                    <lightning:button class="slds-m-top_small" variant="brand" type="submit" name="submit" label="Submit" aura:id="saveButton" />
                </div>
            </div>
            
        </lightning:recordEditForm>
    </div>   
    
</aura:component>