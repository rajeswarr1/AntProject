<aura:component controller="CH_LightningController" implements="force:appHostable,flexipage:availableForRecordHome,force:hasRecordId,force:hasSObjectName" access="global">
    <lightning:workspaceAPI aura:id="Workspace" />
    <!-- Aura Handlers -->
    <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
    <aura:handler event="force:refreshView" action="{!c.doInit}" />
    <!-- Attributes -->
    <aura:attribute name="targetObjectName" type="String" description=""/>
    <aura:attribute name="tableColumns" type="List" description="Pass the columns you want throuth" default=""/>
    <aura:attribute name="globalActions" type="List" description="" default="[]"/>
    <aura:attribute name="relatedProducts" type="List" description=""/>
    <aura:attribute name="type" type="String" default="Parent" description=""/>
    <aura:attribute name="viewAll" type="Boolean" default="false"/>
    <aura:attribute name="actionCounter" type="Integer" default="0" description="Used to update total count of counter to show spinner" />
    <aura:attribute name="showSpinner" type="Boolean" default="false" description="To display spinner" />
    <!-- Component -->
    <div class="slds-grid slds-wrap slds-size_12-of-12 slds-is-relative" style="{! v.viewAll ? 'height: 100%;' : ''}">
        <!--  Loading Spinner  -->
        <aura:if isTrue="{! v.showSpinner }">
            <lightning:spinner aura:id="spinnerId" alternativeText="Loading" size="medium" />
        </aura:if>
        <!-- Table -->
        <c:Datatable aura:id="relatedProductsTable"
                     label="{! v.type + ' Items' }"
                     iconName="standard:products"
                     countOnLabel="{! !v.viewAll }"
                     hideControls="{! !v.viewAll }"
                     data="{! v.relatedProducts }" 
                     columns="{! v.tableColumns }"
                     globalActions="{! v.globalActions }"
                     onglobalaction="{! c.handleGlobalAction }"
                     hideOnEmpty="true"
                     type="{! v.viewAll ? 'fullscreen' : 'related'}"/>
    </div>
</aura:component>